- 田飞 redis 相关处理
- 发生了主从切换  但是代码中没有配置哨兵模式 实际为单台
- 这段日志记录了Redis Sentinel监控到的一次主从切换事件。下面是对日志的分析：
- 1. **主节点下线**：日志中的`+sdown`表示Sentinel检测到主节点处于主观下线状态，即Sentinel认为主节点可能已经下线，但还未确认。
   ```
   26524:X 04 Jul 2024 20:24:59.037 # +sdown master mymaster 172.16.52.52 16379
   ```
- 2. **新纪元开始**：`+new-epoch`表示Sentinel开始一个新的监控周期，通常在检测到主节点下线后发生。
   ```
   26524:X 04 Jul 2024 20:24:59.457 # +new-epoch 3
   ```
- 3. **选举领导者**：`+vote-for-leader`表示Sentinel节点开始选举领导者，以决定哪个Sentinel节点将负责故障转移过程。
   ```
   26524:X 04 Jul 2024 20:24:59.459 # +vote-for-leader 5d2f93c6bfca05d4cddf5a5717a5e41cdba30fef 3
   ```
- 4. **客观下线**：`+odown`表示Sentinel已经达成共识，认为主节点确实已经下线，这是基于配置的`quorum`值（这里是3/2，即超过一半的Sentinel节点同意）。
   ```
   26524:X 04 Jul 2024 20:25:00.106 # +odown master mymaster 172.16.52.52 16379 #quorum 3/2
   ```
- 5. **故障转移延迟**：Sentinel决定不会在指定时间之前启动故障转移。
   ```
   26524:X 04 Jul 2024 20:25:00.106 # Next failover delay: I will not start a failover before Thu Jul  4 20:30:59 2024
   ```
- 6. **配置更新**：Sentinel更新了对主节点的配置信息。
   ```
   26524:X 04 Jul 2024 20:25:00.528 # +config-update-from sentinel 5d2f93c6bfca05d4cddf5a5717a5e41cdba30fef 172.16.52.52 26379 @ mymaster 172.16.52.52 16379
   ```
- 7. **主从切换**：`+switch-master`表示Sentinel已经将一个从节点提升为新的主节点。
   ```
   26524:X 04 Jul 2024 20:25:00.528 # +switch-master mymaster 172.16.52.52 16379 172.16.52.40 16379
   ```
- 8. **从节点更新**：日志中的`* +slave`表示从节点已经被重新配置，现在指向新的主节点。
   ```
   26524:X 04 Jul 2024 20:25:00.528 * +slave slave 172.16.52.10:16379 172.16.52.10 16379 @ mymaster 172.16.52.40 16379
   ```
- 9. **第二次主节点下线**：在日志的后半部分，我们再次看到主节点下线的情况，这次是新的主节点（IP地址172.16.52.40）。
   ```
   26524:X 04 Jul 2024 21:19:32.959 # +sdown master mymaster 172.16.52.40 16379
   ```
- 10. **第二次故障转移**：Sentinel再次进行故障转移，选择一个新的领导者，并尝试将另一个从节点提升为新的主节点。
    ```
    26524:X 04 Jul 2024 21:19:33.031 # +try-failover master mymaster 172.16.52.40 16379
    ```
- 11. **故障转移结束**：`+failover-end`表示故障转移过程已经结束。
    ```
    26524:X 04 Jul 2024 21:22:34.067 # +failover-end master mymaster 172.16.52.40 16379
    ```
- 12. **更新主节点信息**：最后，Sentinel更新了主节点的信息，包括新的主节点的IP地址和端口号。
    ```
    26524:X 04 Jul 2024 21:22:34.067 # +switch-master mymaster 172.16.52.40 16379 172.16.52.10 16379
    ```
- 从日志中可以看出，在20:24:59左右，原来的主节点（IP地址172.16.52.52，端口16379）被认为下线，随后在20:25:00左右，从节点（IP地址172.16.52.40，端口16379）被提升为新的主节点。然后在21:19:32左右，新的主节点也下线了，接着在21:19:33左右，另一个从节点（IP地址172.16.52.10，端口16379）被提升为新的主节点。这表明在这段时间内，发生了两次主从切换。
-