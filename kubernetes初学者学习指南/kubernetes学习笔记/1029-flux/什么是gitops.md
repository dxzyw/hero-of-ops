什么是gitops？

**GitOps: 现代化的持续部署方法**

自2017年由Weaveworks提出以来，GitOps在Twitter和KubeCon上引起了广泛关注。[^1^][1]GitOps是一种针对云原生应用的持续部署方法，强调开发者在操作基础设施时使用他们熟悉的工具，如Git和持续部署工具。

**核心理念**

GitOps的核心理念是使用一个Git仓库来存储生产环境中所需的基础设施的声明性描述，并通过自动化流程使生产环境与仓库中的描述状态保持一致。每次部署新应用或更新现有应用时，只需更新仓库，自动化流程会处理其余的工作。

**部署策略**

GitOps有两种主要的部署策略：**推送式（Push-based）**和**拉取式（Pull-based）**。

- **推送式部署**：由CI/CD工具（如Jenkins、CircleCI）实现，更新应用代码后触发构建管道，更新环境配置仓库并应用到基础设施。
- **拉取式部署**：引入操作员（Operator），持续比较环境配置仓库中的期望状态与实际部署状态，发现差异时自动更新基础设施。

**优势**

- **高效恢复**：GitOps提供完整的环境变更历史记录，错误恢复只需执行git revert。
- **安全性**：拉取式部署避免了外部服务需要环境部署凭据的问题，增强了安全性。
- **透明性**：所有环境变更都通过Git仓库进行，提供了完整的审计日志和变更历史。

GitOps不仅仅是基础设施即代码的延伸，它结合了Git的协作工具和持续部署系统，提供了高效、安全、透明的基础设施管理方式。

参考：www.gitops.tech/
