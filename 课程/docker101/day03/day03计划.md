
## ç¬¬ä¸‰éƒ¨åˆ†ï¼šé•œåƒçš„åˆ›å»ºã€ç®¡ç†å’Œå‘å¸ƒ

ğŸ“Œ **ç®€ä»‹**ï¼šè®²è§£å¦‚ä½•æ„å»ºã€ç®¡ç†å’Œä¼˜åŒ–Dockeré•œåƒï¼Œä»¥æé«˜åº”ç”¨çš„å¯ç§»æ¤æ€§å’Œè¿è¡Œæ•ˆç‡ã€‚
1. Dockeré•œåƒçš„åŸºæœ¬æ¦‚å¿µ
2. è·å–å®˜æ–¹é•œåƒ
3. è‡ªå®šä¹‰é•œåƒæ„å»ºæ–¹æ³•
4. Dockerfileçš„ç¼–å†™
5. é•œåƒç‰ˆæœ¬ç®¡ç†
6. é•œåƒä¼˜åŒ–ä¸å¤šé˜¶æ®µæ„å»º
7. é•œåƒå­˜å‚¨ä¸åˆ†å‘
8. Docker Hubä¸ç§æœ‰ä»“åº“
9. é•œåƒçš„å®‰å…¨æ€§
10. é•œåƒåƒåœ¾å›æ”¶ç­–ç•¥
11. ç”Ÿæˆæ”¯æŒå¤šæ¶æ„çš„Dockeré•œåƒ
12. å®æˆ˜æ¼”ç¤ºï¼šæ„å»ºè‡ªå·±çš„åº”ç”¨é•œåƒ

### 1. Dockeré•œåƒçš„åŸºæœ¬æ¦‚å¿µ

Dockeré•œåƒæ˜¯ç”¨äºåˆ›å»ºå®¹å™¨çš„åªè¯»æ¨¡æ¿ï¼ŒåŒ…å«åº”ç”¨è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ˆä»£ç ã€ä¾èµ–ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰ã€‚é•œåƒåˆ†ä¸ºå¤šå±‚ï¼Œæ¯ä¸€å±‚éƒ½åŸºäºå‰ä¸€å±‚æ„å»ºï¼Œå…·æœ‰é«˜åº¦çš„å¯ç§»æ¤æ€§å’Œå¤ç”¨æ€§ã€‚

---

### 2. è·å–å®˜æ–¹é•œåƒ

å¯ä»¥é€šè¿‡ Docker Hub ç­‰å…¬å…±ä»“åº“è·å–å®˜æ–¹é•œåƒã€‚å®˜æ–¹é•œåƒç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œå®‰å…¨å¯é ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚

**å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
docker pull ubuntu
docker pull python:3.10
```
å¯é€šè¿‡ `docker search` å‘½ä»¤æŸ¥æ‰¾é•œåƒï¼š
```bash
docker search nginx
```

---

### 3. è‡ªå®šä¹‰é•œåƒæ„å»ºæ–¹æ³•

é™¤äº†ä½¿ç”¨å®˜æ–¹é•œåƒï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è‡ªå®šä¹‰é•œåƒã€‚å¸¸è§æ–¹æ³•æœ‰ï¼š

- åŸºäºå·²æœ‰é•œåƒæ‰‹åŠ¨ä¿®æ”¹å¹¶æäº¤ä¸ºæ–°é•œåƒ
- ç¼–å†™ Dockerfile è‡ªåŠ¨åŒ–æ„å»º

**ç¤ºä¾‹ï¼š**
```bash
docker commit [å®¹å™¨ID] myimage:v1
```
æ›´æ¨èä½¿ç”¨ Dockerfile æ–¹å¼ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œè‡ªåŠ¨åŒ–ã€‚

---

### 4. Dockerfileçš„ç¼–å†™

Dockerfile æ˜¯å®šä¹‰é•œåƒæ„å»ºè¿‡ç¨‹çš„è„šæœ¬æ–‡ä»¶ã€‚å¸¸ç”¨æŒ‡ä»¤æœ‰ï¼š

- `FROM`ï¼šæŒ‡å®šåŸºç¡€é•œåƒ
- `RUN`ï¼šæ‰§è¡Œå‘½ä»¤
- `COPY`/`ADD`ï¼šå¤åˆ¶æ–‡ä»¶
- `WORKDIR`ï¼šè®¾ç½®å·¥ä½œç›®å½•
- `CMD`/`ENTRYPOINT`ï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤
- `EXPOSE`ï¼šå£°æ˜ç«¯å£
- `ENV`ï¼šè®¾ç½®ç¯å¢ƒå˜é‡

**ç¤ºä¾‹ Dockerfileï¼š**
```dockerfile
FROM python:3.10
WORKDIR /app
COPY . .
RUN pip install -r requirements.txt
CMD ["python", "main.py"]
```

---

### 5. é•œåƒç‰ˆæœ¬ç®¡ç†

é€šè¿‡æ ‡ç­¾ï¼ˆtagï¼‰ç®¡ç†é•œåƒçš„ä¸åŒç‰ˆæœ¬ï¼Œä¾¿äºå›æ»šå’Œå¤šç¯å¢ƒéƒ¨ç½²ã€‚

**å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
docker tag myimage:v1 myrepo/myimage:v2
docker images
```

---

### 6. é•œåƒä¼˜åŒ–ä¸å¤šé˜¶æ®µæ„å»º

ä¼˜åŒ–é•œåƒä½“ç§¯å’Œæ„å»ºæ•ˆç‡ï¼Œå¸¸ç”¨æ–¹æ³•ï¼š

- æ¸…ç†æ— ç”¨æ–‡ä»¶å’Œç¼“å­˜
- åˆç†åˆ†å±‚ï¼Œå‡å°‘é•œåƒå±‚æ•°
- ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼ˆmulti-stage buildï¼‰ï¼Œåªä¿ç•™æœ€ç»ˆäº§ç‰©

**å¤šé˜¶æ®µæ„å»ºç¤ºä¾‹ï¼š**
```dockerfile
FROM golang:1.20 AS builder
WORKDIR /src
COPY . .
RUN go build -o app

FROM alpine:latest
COPY --from=builder /src/app /app
CMD ["/app"]
```

---

### 7. é•œåƒå­˜å‚¨ä¸åˆ†å‘

é•œåƒå¯å­˜å‚¨åœ¨æœ¬åœ°æˆ–æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆå¦‚ Docker Hubã€Harborï¼‰ã€‚

**å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
docker push myrepo/myimage:v1
docker save myimage:v1 > myimage_v1.tar
docker load < myimage_v1.tar
```

---

### 8. Docker Hubä¸ç§æœ‰ä»“åº“

- **Docker Hub**ï¼šå…¨çƒæœ€å¤§çš„å…¬å…±é•œåƒä»“åº“ï¼Œé€‚åˆå¼€æºé¡¹ç›®å’Œå…¬å…±é•œåƒåˆ†å‘ã€‚
- **ç§æœ‰ä»“åº“**ï¼šå¦‚ Harborã€é˜¿é‡Œäº‘é•œåƒæœåŠ¡ï¼Œé€‚åˆä¼ä¸šå†…éƒ¨é•œåƒç®¡ç†å’Œå®‰å…¨æ§åˆ¶ã€‚

**ç™»å½•ä¸æ¨é€ï¼š**
```bash
docker login
docker push myrepo/myimage:v1
```

---

### 9. é•œåƒçš„å®‰å…¨æ€§

- ä½¿ç”¨å®˜æ–¹æˆ–å¯ä¿¡é•œåƒæº
- å®šæœŸæ‰«æé•œåƒæ¼æ´ï¼ˆå¦‚ `docker scan`ã€Trivyï¼‰
- æœ€å°åŒ–åŸºç¡€é•œåƒï¼Œå‡å°‘æ”»å‡»é¢
- å®šæœŸæ›´æ–°å’Œä¿®å¤ä¾èµ–

---

### 10. é•œåƒåƒåœ¾å›æ”¶ç­–ç•¥

é•¿æœŸä½¿ç”¨ä¼šäº§ç”Ÿæ— ç”¨é•œåƒå’Œä¸­é—´å±‚ï¼Œéœ€å®šæœŸæ¸…ç†ï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚

**å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
docker image prune
docker system prune -a
```

---

### 11. ç”Ÿæˆæ”¯æŒå¤šæ¶æ„çš„Dockeré•œåƒ

å¯é€šè¿‡ `buildx` å·¥å…·æ„å»ºå¤šæ¶æ„é•œåƒï¼Œæ”¯æŒ x86ã€ARM ç­‰å¹³å°ã€‚

**ç¤ºä¾‹ï¼š**
```bash
docker buildx build --platform linux/amd64,linux/arm64 -t myimage:multiarch .
```

---

### 12. å®æˆ˜æ¼”ç¤ºï¼šæ„å»ºè‡ªå·±çš„åº”ç”¨é•œåƒ

**æ­¥éª¤ï¼š**
1. ç¼–å†™ Dockerfile
2. æ„å»ºé•œåƒ
   ```bash
   docker build -t myapp:v1 .
   ```
3. è¿è¡Œå¹¶æµ‹è¯•å®¹å™¨
   ```bash
   docker run -d -p 8080:80 myapp:v1
   ```
4. æ¨é€åˆ°ä»“åº“
   ```bash
   docker tag myapp:v1 myrepo/myapp:v1
   docker push myrepo/myapp:v1
   ```

---

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ Docker é•œåƒçš„æ„å»ºã€ç®¡ç†ã€ä¼˜åŒ–ä¸åˆ†å‘ï¼Œä¸ºåº”ç”¨çš„å®¹å™¨åŒ–å’ŒæŒç»­äº¤ä»˜æ‰“ä¸‹åšå®åŸºç¡€ã€‚
